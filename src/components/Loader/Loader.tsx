'use client';

import { useEffect } from 'react';
import { gsap } from 'gsap';

import s from './Loader.module.scss';

export const Loader = () => {
  useEffect(() => {
    const tl = gsap
      .timeline({ defaults: { ease: 'none' } })

      .to(`.${s.ball}`, { y: 27, duration: 1 })
      .to(`.letterN`, {
        attr: {
          d: 'M 112.987 239.971 L 120.764 189.851 L 129.308 189.939 L 142.269 229.025 C 141.776 212.22 142.146 190.109 142.207 189.403 L 152.366 190.063 C 152.396 190.222 146.238 230.814 163.488 240.591 L 136.047 240.492 L 125.657 201.919 L 126.417 239.866 L 112.987 239.971 Z',
        },
      });

    const master = gsap.timeline({ repeat: 20 });

    master
      .add(
        tl.tweenTo(1, {
          ease: 'power2.inOut',
          duration: 1.05,
          repeat: 1,
          yoyo: true,
        })
      )
      .to(
        `.${s.wire}`,
        {
          attr: {
            d: 'M 90.095 240.728 C 90.095 240.728 89.75 140.559 89.75 140.522 C 96.24 153.618 118.159 154.668 124.927 140.154 L 110.029 240.702 L 90.095 240.728 Z',
          },
          duration: 0.6,
        },
        0.5
      )
      .to(
        `.${s.wire}`,
        {
          duration: 0.8,
          ease: 'bounce.out',
          attr: {
            d: 'M 90.095 240.728 C 90.095 240.728 89.75 140.559 89.75 140.522 C 95.19 135.727 117.017 134.643 124.927 140.154 L 110.029 240.702 L 90.095 240.728 Z',
          },
        },
        1.3
      )
      .to(
        `.${s.wire}`,
        {
          yoyo: true,
          duration: 0.5,
          ease: 'bounce.inOut',
          attr: {
            d: 'M 90.095 240.728 C 90.095 240.728 89.75 140.559 89.75 140.522 C 89.558 140.488 125.192 139.666 124.927 140.154 L 110.029 240.702 L 90.095 240.728 Z',
          },
        },
        1.8
      )
      .to(
        `.letterN`,
        {
          duration: 0.6,
          repeat: 1,
          yoyo: true,
          attr: {
            d: 'M 112.987 239.971 L 120.764 189.851 L 129.308 189.939 L 142.269 229.025 C 135.728 211.835 154.613 196.583 159.736 196.199 L 171.338 203.686 C 159.142 200.127 130.089 225.627 163.488 240.591 L 136.047 240.492 L 125.657 201.919 L 126.417 239.866 L 112.987 239.971 Z',
          },
        },
        0.5
      )
      .to(
        `.letterC`,
        {
          y: -3,
          duration: 0.5,
        },
        0.5
      )
      .to(
        `.letterC`,
        {
          y: 0,
          duration: 0.5,
          ease: 'bounce.out',
        },
        1
      );

    return () => {
      tl.kill();
    };
  }, []);
  return (
    <div className={s.app__wrapper}>
      <div className={s.app__window}>
        <svg
          className={s.animation}
          viewBox="0 0 300 300"
          xmlns="http://www.w3.org/2000/svg"
        >
          <ellipse
            className={s.ball}
            style={{
              strokeWidth: '1px',
              stroke: 'black',
              fill: ' rgb(255, 255, 255)',
            }}
            cx="107.485"
            cy="105.157"
            rx="20"
            ry="20"
          />
          <path
            className={s.wire}
            style={{ fill: 'rgb(255, 255, 255)', stroke: 'black' }}
            d="M 90.095 240.728 C 90.095 240.728 89.75 140.559 89.75 140.522 C 89.558 140.488 125.192 139.666 124.927 140.154 L 110.029 240.702 L 90.095 240.728 Z"
          />
          {/* N */}
          <path
            className="letterN"
            style={{ fill: 'rgb(255, 255, 255)', stroke: 'black' }}
            d="M 112.987 239.971 L 120.764 189.851 L 129.308 189.939 L 142.269 229.025 C 141.776 212.22 142.146 190.109 142.207 189.403 L 152.366 190.063 C 152.396 190.222 146.238 230.814 163.488 240.591 L 136.047 240.492 L 125.657 201.919 L 126.417 239.866 L 112.987 239.971 Z"
          />

          {/* S */}
          <path
            className="letterC"
            style={{ fill: 'rgb(255, 255, 255)', stroke: 'black' }}
            d="M 184.783 204.993 C 184.905 204.935 165.162 199.844 156.337 210.632 C 150.574 217.676 154.606 240.139 174.58 239.793 L 184.329 239.608 L 184.058 230.724 C 184.187 230.654 173.369 231.88 173.369 231.88 C 157.005 233.411 157.229 200.743 184.536 212.985 L 184.783 204.993 Z"
            transform="matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 0)"
          />
          {/* T */}
          <path
            style={{ fill: 'rgb(255, 255, 255)', stroke: 'black' }}
            d="M 186.555 239.855 L 187.408 188.981 L 157.114 188.878 L 157.481 176.704 L 237.446 176.283 L 237.737 188.152 C 237.737 188.152 200.575 188.902 200.549 188.902 C 200.523 188.902 199.053 240.435 199.053 240.435 L 186.555 239.855 Z"
            transform="matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 0)"
          />
          {/* A */}
          <path
            style={{ fill: 'rgb(255, 255, 255)', stroke: 'black' }}
            d="M 202.849 239.791 L 203.741 201.504 L 219.104 197.913 L 251.386 239.344 L 226.683 238.862 L 221.578 223.669 L 212.733 224.913 L 214.516 240.081 L 202.849 239.791 Z"
            transform="matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 0)"
          />
          <path
            style={{ fill: 'rgb(0, 0, 0)', stroke: 'black' }}
            d="M 211.752 208.194 L 211.46 218.386 L 221.091 217.261 L 215.911 207.298 L 211.752 208.194 Z"
            transform="matrix(0.9999999999999999, 0, 0, 0.9999999999999999, 0, 0)"
          />
        </svg>
      </div>
    </div>
  );
};
